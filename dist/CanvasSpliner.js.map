{"version":3,"file":null,"sources":["../node_modules/splines/index.js","../src/PointCollection.js","../src/CanvasSpliner.js"],"sourcesContent":["/**\n * by George MacKerron, mackerron.com\n *\n * Monotonic Cubic Spline:\n *\n *  adapted from:\n *     http://sourceforge.net/mailarchive/forum.php?thread_name=EC90C5C6-C982-4F49-8D46-A64F270C5247%40gmail.com&forum_name=matplotlib-users\n *     (easier to read at http://old.nabble.com/%22Piecewise-Cubic-Hermite-Interpolating-Polynomial%22-in-python-td25204843.html)\n *\n *  with help from:\n *      F N Fritsch & R E Carlson (1980) 'Monotone Piecewise Cubic Interpolation', SIAM Journal of Numerical Analysis 17(2), 238 - 246.\n *      http://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n *      http://en.wikipedia.org/wiki/Cubic_Hermite_spline\n *\n *\n *  Natural and Clamped:\n *\n *  adapted from:\n *      http://www.michonline.com/ryan/csc/m510/splinepresent.html\n **/\n\nvar CubicSpline, MonotonicCubicSpline;\n\n\nMonotonicCubicSpline = function () {\n    function MonotonicCubicSpline(x, y) {\n\n        var alpha, beta, delta, dist, i, m, n, tau, to_fix, _i, _j, _len, _len2, _ref, _ref2, _ref3, _ref4;\n\n        n = x.length;\n        delta = [];\n        m = [];\n        alpha = [];\n        beta = [];\n        dist = [];\n        tau = [];\n\n        for (i = 0, _ref = n - 1; (0 <= _ref ? i < _ref : i > _ref); (0 <= _ref ? i += 1 : i -= 1)) {\n            delta[i] = (y[i + 1] - y[i]) / (x[i + 1] - x[i]);\n            if (i > 0) {\n                m[i] = (delta[i - 1] + delta[i]) / 2;\n            }\n        }\n\n        m[0] = delta[0];\n        m[n - 1] = delta[n - 2];\n        to_fix = [];\n\n        for (i = 0, _ref2 = n - 1; (0 <= _ref2 ? i < _ref2 : i > _ref2); (0 <= _ref2 ? i += 1 : i -= 1)) {\n            if (delta[i] === 0) {\n                to_fix.push(i);\n            }\n        }\n\n        for (_i = 0, _len = to_fix.length; _i < _len; _i++) {\n            i = to_fix[_i];\n            m[i] = m[i + 1] = 0;\n        }\n\n        for (i = 0, _ref3 = n - 1; (0 <= _ref3 ? i < _ref3 : i > _ref3); (0 <= _ref3 ? i += 1 : i -= 1)) {\n            alpha[i] = m[i] / delta[i];\n            beta[i] = m[i + 1] / delta[i];\n            dist[i] = Math.pow(alpha[i], 2) + Math.pow(beta[i], 2);\n            tau[i] = 3 / Math.sqrt(dist[i]);\n        }\n\n\n        to_fix = [];\n\n        for (i = 0, _ref4 = n - 1; (0 <= _ref4 ? i < _ref4 : i > _ref4); (0 <= _ref4 ? i += 1 : i -= 1)) {\n            if (dist[i] > 9) {\n                to_fix.push(i);\n            }\n        }\n\n        for (_j = 0, _len2 = to_fix.length; _j < _len2; _j++) {\n            i = to_fix[_j];\n            m[i] = tau[i] * alpha[i] * delta[i];\n            m[i + 1] = tau[i] * beta[i] * delta[i];\n        }\n\n        this.x = x.slice(0, n);\n        this.y = y.slice(0, n);\n        this.m = m;\n    }\n\n    MonotonicCubicSpline.prototype.interpolate = function (x) {\n        var h, h00, h01, h10, h11, i, t, t2, t3, y, _ref;\n\n        for (i = _ref = this.x.length - 2; (_ref <= 0 ? i <= 0 : i >= 0); (_ref <= 0 ? i += 1 : i -= 1)) {\n            if (this.x[i] <= x) {\n                break;\n            }\n        }\n\n        h = this.x[i + 1] - this.x[i];\n        t = (x - this.x[i]) / h;\n        t2 = Math.pow(t, 2);\n        t3 = Math.pow(t, 3);\n        h00 = 2 * t3 - 3 * t2 + 1;\n        h10 = t3 - 2 * t2 + t;\n        h01 = -2 * t3 + 3 * t2;\n        h11 = t3 - t2;\n        y = h00 * this.y[i] + h10 * h * this.m[i] + h01 * this.y[i + 1] + h11 * h * this.m[i + 1];\n\n        return y;\n    };\n\n    return MonotonicCubicSpline;\n}();\n\n\nCubicSpline = function () {\n    function CubicSpline(x, a, d0, dn) {\n\n        var b, c, clamped, d, h, i, k, l, n, s, u, y, z, _ref;\n\n        if (!((x != null) && (a != null))) {\n            return;\n        }\n\n        clamped = (d0 != null) && (dn != null);\n        n = x.length - 1;\n        h = [];\n        y = [];\n        l = [];\n        u = [];\n        z = [];\n        c = [];\n        b = [];\n        d = [];\n        k = [];\n        s = [];\n\n        for (i = 0; (0 <= n ? i < n : i > n); (0 <= n ? i += 1 : i -= 1)) {\n            h[i] = x[i + 1] - x[i];\n            k[i] = a[i + 1] - a[i];\n            s[i] = k[i] / h[i];\n        }\n\n        if (clamped) {\n            y[0] = 3 * (a[1] - a[0]) / h[0] - 3 * d0;\n            y[n] = 3 * dn - 3 * (a[n] - a[n - 1]) / h[n - 1];\n        }\n\n        for (i = 1; (1 <= n ? i < n : i > n); (1 <= n ? i += 1 : i -= 1)) {\n            y[i] = 3 / h[i] * (a[i + 1] - a[i]) - 3 / h[i - 1] * (a[i] - a[i - 1]);\n        }\n\n        if (clamped) {\n            l[0] = 2 * h[0];\n            u[0] = 0.5;\n            z[0] = y[0] / l[0];\n        } else {\n            l[0] = 1;\n            u[0] = 0;\n            z[0] = 0;\n        }\n\n        for (i = 1; (1 <= n ? i < n : i > n); (1 <= n ? i += 1 : i -= 1)) {\n            l[i] = 2 * (x[i + 1] - x[i - 1]) - h[i - 1] * u[i - 1];\n            u[i] = h[i] / l[i];\n            z[i] = (y[i] - h[i - 1] * z[i - 1]) / l[i];\n        }\n\n        if (clamped) {\n            l[n] = h[n - 1] * (2 - u[n - 1]);\n            z[n] = (y[n] - h[n - 1] * z[n - 1]) / l[n];\n            c[n] = z[n];\n        } else {\n            l[n] = 1;\n            z[n] = 0;\n            c[n] = 0;\n        }\n\n        for (i = _ref = n - 1; (_ref <= 0 ? i <= 0 : i >= 0); (_ref <= 0 ? i += 1 : i -= 1)) {\n            c[i] = z[i] - u[i] * c[i + 1];\n            b[i] = (a[i + 1] - a[i]) / h[i] - h[i] * (c[i + 1] + 2 * c[i]) / 3;\n            d[i] = (c[i + 1] - c[i]) / (3 * h[i]);\n        }\n\n        this.x = x.slice(0, n + 1);\n        this.a = a.slice(0, n);\n        this.b = b;\n        this.c = c.slice(0, n);\n        this.d = d;\n    }\n\n    CubicSpline.prototype.derivative = function () {\n\n        var c, d, s, x, _i, _j, _len, _len2, _ref, _ref2, _ref3;\n\n        s = new this.constructor();\n        s.x = this.x.slice(0, this.x.length);\n        s.a = this.b.slice(0, this.b.length);\n        _ref = this.c;\n\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            c = _ref[_i];\n            s.b = 2 * c;\n        }\n        _ref2 = this.d;\n\n        for (_j = 0, _len2 = _ref2.length; _j < _len2; _j++) {\n            d = _ref2[_j];\n            s.c = 3 * d;\n        }\n\n        for (x = 0, _ref3 = this.d.length; (0 <= _ref3 ? x < _ref3 : x > _ref3); (0 <= _ref3 ? x += 1 : x -= 1)) {\n            s.d = 0;\n        }\n\n        return s;\n    };\n\n\n    CubicSpline.prototype.interpolate = function (x) {\n\n        var deltaX, i, y, _ref;\n\n        for (i = _ref = this.x.length - 1; (_ref <= 0 ? i <= 0 : i >= 0); (_ref <= 0 ? i += 1 : i -= 1)) {\n            if (this.x[i] <= x) {\n                break;\n            }\n        }\n\n        deltaX = x - this.x[i];\n        y = this.a[i] + this.b[i] * deltaX + this.c[i] * Math.pow(deltaX, 2) + this.d[i] * Math.pow(deltaX, 3);\n\n        return y;\n    };\n\n    return CubicSpline;\n}();\n\nmodule.exports = {\n    CubicSpline: CubicSpline,\n    MonotonicCubicSpline: MonotonicCubicSpline\n};","\n\n/**\n*\n*/\nclass PointCollection {\n  constructor(){\n    this._points = [];\n\n    this._min = {\n      x: 0,\n      y: 0,\n    }\n\n    this._max = {\n      x: Infinity,\n      y: Infinity\n    }\n  }\n\n\n  /**\n  * Define the acceptable min and max bot both axis.\n  * @param {String} bound - can be \"min\" or \"max\"\n  * @param {String} axis - can be \"x\" or \"y\"\n  * @param {Number} value - a number\n  * Note that minimum boudaries are inclusive while max are exclusive\n  */\n  setBoundary( bound, axis, value ){\n    this[\"_\" + bound][axis] = value;\n  }\n\n  /**\n  *\n  */\n  add( p ){\n    var newIndex = null;\n\n    if(p.x >= this._min.x && p.x <= this._max.x && p.y >= this._min.y && p.y <= this._max.y)\n    {\n\n      if( !(\"xLocked\" in p) )\n        p.xLocked = false;\n\n      if( !(\"yLocked\" in p) )\n        p.yLocked = false;\n\n      if( !(\"safe\" in p) )\n        p.safe = false;\n\n      // adding the point\n      this._points.push( p );\n      this._sortPoints();\n      newIndex = this._points.indexOf( p )\n    }\n    return newIndex;\n  }\n\n\n  _sortPoints(){\n    // sorting the array upon x\n    this._points.sort(function(p1, p2) {\n      return p1.x - p2.x;\n    });\n  }\n\n\n  /**\n  * Remove the points at the given index.\n  * @param {Number} index - index of the point to remove\n  * @return {Object} the point that was just removed or null if out of bound\n  */\n  remove( index ){\n    var removedPoint = null;\n\n    if(index >= 0 && index < this._points.length && !this._points[index].safe){\n      removedPoint = this._points.splice(index, 1);\n    }\n\n    return removedPoint;\n  }\n\n\n  /**\n  * Get the index within the collection of the point that is the closest from\n  * the one given in argument. Returns also the euclidiant distance to this point.\n  * @return {Object} like {index: Number, distance: Number}, or null if there is\n  * no point in this collection.\n  */\n  getClosestFrom( p ){\n\n    if(!this._points.length)\n      return null;\n\n    var closestDistance = Infinity;\n    var closestPointIndex = null;\n\n    for(var i=0; i<this._points.length; i++){\n      var d = Math.sqrt( Math.pow(p.x - this._points[i].x, 2) + Math.pow(p.y - this._points[i].y, 2) );\n\n      if( d < closestDistance ){\n        closestDistance = d;\n        closestPointIndex = i;\n      }\n    }\n\n    return {\n      index: closestPointIndex,\n      distance: closestDistance\n    }\n  }\n\n\n  /**\n  * Gets the point at such index\n  * @param {Number} index - the index of the point we want\n  * @return {Object} point that contains at least \"x\" and \"y\" properties.\n  */\n  getPoint( index ){\n    if(index >= 0 && index < this._points.length){\n      return this._points[index];\n    }else{\n      return null;\n    }\n  }\n\n\n  /**\n  * Get the number of points in the collection\n  * @return {Number} the number of points\n  */\n  getNumberOfPoints(){\n    return this._points.length;\n  }\n\n\n  /**\n  * Update the posiiton of an existing point\n  * @param {Number} index - index of the existing point to update\n  * @param {Object} p - point that has coord we want to use as new coord. x and y values will be copied, no pointer association\n  * @return {Number} new index, the changed point may have changed its index among the x-ordered list\n  */\n  updatePoint( index, p ){\n    var newIndex = index;\n\n    if(index >= 0 && index < this._points.length){\n      if(p.x >= this._min.x && p.x < this._max.x && p.y >= this._min.y && p.y < this._max.y){\n\n        if(!this._points[index].xLocked)\n          this._points[index].x = p.x;\n\n        if(!this._points[index].yLocked)\n          this._points[index].y = p.y;\n\n        var thePointInArray = this._points[index];\n        this._sortPoints();\n\n        // the point may have changed its index\n        newIndex = this._points.indexOf( thePointInArray )\n      }\n    }\n\n    return newIndex;\n  }\n\n\n  /**\n  * Get all \"x\" coordinates of the collection as an array of Number\n  * @return {Array} of Number\n  */\n  getXseries(){\n    var xSeries = [];\n    for(var i=0; i<this._points.length; i++){\n      xSeries.push( this._points[i].x );\n    }\n    return xSeries;\n  }\n\n\n  /**\n  * Get all \"y\" coordinates of the collection as an array of Number\n  * @return {Array} of Number\n  */\n  getYseries(){\n    var ySeries = [];\n    for(var i=0; i<this._points.length; i++){\n      ySeries.push( this._points[i].y );\n    }\n    return ySeries;\n  }\n\n} /* END of class PointCollection */\n\n\nexport { PointCollection }\n","/*\n* Author    Jonathan Lurie - http://me.jonahanlurie.fr\n* License   MIT\n* Link      https://github.com/jonathanlurie/es6module\n* Lab       MCIN - http://mcin.ca/ - Montreal Neurological Institute\n*/\n\nimport splines from 'splines'\nimport MonotonicCubicSpline from 'splines'\nimport { PointCollection } from './PointCollection.js'\n\n\n/**\n* events:\n*   - \"movePoint\" called everytime the pointer moves a point, with argument x and y normalized arrays\n*   - \"releasePoint\" called everytime the pointers is released after moving a point, with argument x and y normalized arrays\n*   - \"pointAdded\"\n*/\nclass CanvasSpliner {\n\n  /**\n  * @param {String} splineType - \"natural\" or \"monotonic\"\n  */\n  constructor(parentID, width, height, splineType = 'natural'){\n    // some styling\n\n    // borders of the canvas element\n    this._borderStyle = {\n      in: \"1px solid #d3d3ff\",\n      out: \"1px solid #e3e3e3\"\n    }\n\n    // radius of the control points\n    this._controlPointRadius = 8;\n\n    // color of the control points\n    this._controlPointColor = {\n      idle: \"rgba(244, 66, 167, 0.5)\",\n      hovered: \"rgba(0, 0, 255, 0.5)\",\n      grabbed: \"rgba(0, 200, 0, 0.5)\"\n    }\n\n    // style of the curve\n    this._curveColor = {\n      idle: 'rgba(0, 128, 255, 1)',\n      moving: 'rgba(255, 128, 0, 1)'\n    }\n    \n    // color of the grid\n    this._gridColor = \"rgba(0, 0, 0, 0.3)\";\n    \n    // color of the text\n    this._textColor = \"rgba(0, 0, 0, 0.1)\";\n\n    // thickness of the curve\n    this._curveThickness = 1;\n    \n    // color of the background\n    this._backgroundColor = false;\n    \n\n    this._mouse = null;\n    this._pointHoveredIndex = -1; // index of the grabbed point. -1 if none\n    this._pointGrabbedIndex = -1;\n    this._mouseDown = false; // says if the mouse is maintained clicked\n\n    this._canvas = null;\n    this._ctx = null;\n\n    this._screenRatio = window.devicePixelRatio;\n\n    var parentElem = document.getElementById(parentID);\n\n    // abort if parent div does not exist\n    if(!parentElem)\n      return;\n\n    // creating the canvas\n    this._canvas = document.createElement('canvas');\n    this._canvas.width  = width;\n    this._canvas.height = height;\n    this._canvas.setAttribute(\"tabIndex\", 1);\n    this._canvas.style.outline = \"none\";\n    this._canvas.style.cursor = \"default\";\n    this._canvas.style.border = this._borderStyle.out;\n    this._canvas.onselectstart = function () { return false; }\n    this._width = width;\n    this._height = height;\n\n    // adding the canvas to the parent div\n    parentElem.appendChild(this._canvas);\n\n    this._ctx = this._canvas.getContext(\"2d\");\n    //this._ctx.scale( 1.1, 1.1)\n    this._ctx.scale( this._screenRatio , this._screenRatio );\n\n    // init the mouse and keyboard events\n    this._canvas.addEventListener('mousemove', this._onCanvasMouseMove.bind(this), false);\n    this._canvas.addEventListener('mousedown', this._onCanvasMouseDown.bind(this), false);\n    this._canvas.addEventListener('mouseup', this._onCanvasMouseUp.bind(this), false);\n    this._canvas.addEventListener('dblclick', this._onCanvasMouseDbclick.bind(this), false);\n    this._canvas.addEventListener('mouseleave', this._onCanvasMouseLeave.bind(this), false);\n    this._canvas.addEventListener('mouseenter', this._onCanvasMouseEnter.bind(this), false);\n    this._canvas.addEventListener( 'keyup', this._onKeyUp.bind(this), false );\n    //this._canvas.addEventListener( 'keydown', this._onKeyDown.bind(this), false );\n\n    // dealing with cubic spline type\n    this._splineConstructor = splines.CubicSpline;\n    if(splineType === \"monotonic\"){\n      this._splineConstructor = splines.MonotonicCubicSpline;\n    }\n\n    // the point collection\n    this._pointCollection = new PointCollection();\n    this._pointCollection.setBoundary(\"max\", \"x\", width);\n    this._pointCollection.setBoundary(\"max\", \"y\", height);\n\n    // interpolated values in a buffer\n    this._xSeriesInterpolated = new Float32Array(this._width).fill(0);\n    this._ySeriesInterpolated = new Float32Array(this._width).fill(0);\n\n    this._gridStep = 1/3;\n\n    // events\n    this._onEvents = {\n      movePoint: null,\n      releasePoint: null,\n      pointAdded: null\n    };\n    \n    this.draw();\n  }\n\n  \n  /**\n  * Get an array of all the x coordinates that CanvasSpliner computed an interpolation of.\n  * See getYSeriesInterpolated to get the corresponding interpolated values.\n  * @return {Array} of x values with regular interval in [0, 1]\n  */\n  getXSeriesInterpolated(){\n    return this._xSeriesInterpolated;\n  }\n  \n  \n  /**\n  * Get all the interpolated values for each x given by getXSeriesInterpolated.\n  * @return {Array} of interpolated y\n  */\n  getYSeriesInterpolated(){\n    return this._ySeriesInterpolated;\n  }\n  \n  /**\n  * Change the radius of the control points\n  * @param {Number} r - the radius in pixel\n  */\n  setControlPointRadius( r ){\n    this._controlPointRadius = r;\n  }\n  \n  \n  /**\n  * Set the color of the control point in a specific state\n  * @param {String} state - must be one of: \"idle\", \"hovered\" or \"grabbed\"\n  * @param {String} color - must be css style best is of form \"rgba(244, 66, 167, 0.5)\"\n  */\n  setControlPointColor( state, color ){\n    this._controlPointColor[ state ] = color;\n  }\n  \n  /**\n  * Set the color of the curve in a specific state\n  * @param {String} state - must be one of: \"idle\" or \"moving\"\n  * @param {String} color - must be css style best is of form \"rgba(244, 66, 167, 0.5)\"\n  */\n  setCurveColor( state, color ){\n    this._curveColor[ state ] = color;\n  }\n\n\n  /**\n  * Set the color of the grid\n  * @param {String} color - must be css style best is of form \"rgba(244, 66, 167, 0.5)\"\n  */\n  setGridColor( color ){\n    this._gridColor = color;\n  }\n\n  /**\n  * Define the grid step in unit coodinate. Default: 0.33\n  * @param {Number}\n  */\n  setGridStep( gs ){\n    if( gs<=0 || gs >=1){\n      this._gridStep = 0;\n    }else{\n      this._gridStep = gs;\n    }\n\n    this.draw();\n  }\n  \n  \n  /**\n  * Set the color of the text\n  * @param {String} color - must be css style best is of form \"rgba(244, 66, 167, 0.5)\"\n  */\n  setTextColor( color ){\n    this._textColor = color;\n  }\n  \n  \n  /**\n  * Define the thickness of the curve\n  * @param {Number} t - thickness in pixel\n  */\n  setCurveThickness( t ){\n    this._curveThickness = t;\n  }\n\n  \n  /**\n  * Define the canvas background color\n  * @param {String} color - must be css style best is of form \"rgba(244, 66, 167, 0.5)\" \n  * Can allso be null/0/false to leave a blank background\n  */\n  setBackgroundColor( color ){\n    this._backgroundColor = color;\n  }\n  \n\n  /**\n  * @param {String} splineType - \"natural\" or \"monotonic\"\n  */\n  setSplineType( splineType ){\n    if(splineType === \"monotonic\"){\n      this._splineConstructor = splines.MonotonicCubicSpline;\n    }else{\n      this._splineConstructor = splines.CubicSpline;\n    }\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Refresh the position of the pointer we store internally (relative to the canvas)\n  */\n  _updateMousePosition(evt) {\n    var rect = this._canvas.getBoundingClientRect();\n\n    this._mouse = {\n      x: evt.clientX - rect.left,\n      y: this._height - (evt.clientY - rect.top)\n    }\n  }\n\n\n  /**\n  * [EVENT] [PRIVATE]\n  * for when the mouse is moving over the canvas\n  */\n  _onCanvasMouseMove(evt){\n    this._updateMousePosition(evt);\n    //console.log( 'moving: ' + this._mouse.x + ',' + this._mouse.y );\n\n    // check what control point is the closest from the pointer position\n    var closestPointInfo = this._pointCollection.getClosestFrom( this._mouse );\n    \n    if(!closestPointInfo)\n      return;\n\n    // no point is currently grabbed\n    if(this._pointGrabbedIndex == -1){\n      // the pointer hovers a point\n      if( closestPointInfo.distance <= this._controlPointRadius){\n        this._pointHoveredIndex = closestPointInfo.index;\n      }\n      // the pointer does not hover a point\n      else{\n        // ... but maybe it used to hove a point, in this case we want to redraw\n        // to change back the color to idle mode\n        var mustRedraw = false;\n        if( this._pointHoveredIndex != -1)\n          mustRedraw = true;\n          \n        this._pointHoveredIndex = -1;\n        \n        if(mustRedraw)\n          this.draw();\n          \n      }\n\n    }\n    // a point is grabbed\n    else{\n      this._pointGrabbedIndex = this._pointCollection.updatePoint( this._pointGrabbedIndex, this._mouse )\n      this._pointHoveredIndex = this._pointGrabbedIndex;\n\n    }\n\n    // reduce usless drawing\n    if( this._pointHoveredIndex != -1 || this._pointGrabbedIndex != -1){\n      this.draw();\n\n    }\n\n\n    // now the buffer is filled (after draw)\n    if( this._pointGrabbedIndex != -1 ){\n      var grabbedPoint = this._pointCollection.getPoint( this._pointGrabbedIndex );\n      this._drawCoordinates(\n        Math.round((grabbedPoint.x / this._width)*1000 ) / 1000,\n        Math.round((grabbedPoint.y/this._height)*1000 ) / 1000\n      );\n\n      if(this._onEvents.movePoint)\n        this._onEvents.movePoint( this );\n\n    }\n\n  }\n\n\n\n\n  /**\n  * [EVENT] [PRIVATE]\n  * for when the mouse is clicked over the canvas\n  */\n  _onCanvasMouseDown(evt){\n    //console.log( 'down ');\n    this._mouseDown = true;\n\n    if( this._pointHoveredIndex != -1 ){\n      //console.log(\"grabing a point\");\n      this._pointGrabbedIndex = this._pointHoveredIndex\n    }\n  }\n\n\n  /**\n  * [EVENT] [PRIVATE]\n  * for when the mouse is released over the canvas\n  */\n  _onCanvasMouseUp(evt){\n    //console.log( 'up ' );\n    var aPointWasGrabbed = (this._pointGrabbedIndex != -1)\n    this._mouseDown = false;\n    this._pointGrabbedIndex = -1;\n\n    this.draw();\n\n    if(this._onEvents.releasePoint && aPointWasGrabbed)\n      this._onEvents.releasePoint( this );\n  }\n\n\n  /**\n  * [EVENT] [PRIVATE]\n  * for when we double click on the canvas\n  */\n  _onCanvasMouseDbclick(evt){\n    //console.log(\"dbclick\");\n    this._canvas.focus();\n\n    if(this._pointHoveredIndex == -1 ){\n      var index = this.add( {x: this._mouse.x / this._width, y: this._mouse.y / this._height} );\n      this._pointHoveredIndex = index;\n    }else{\n      this.remove( this._pointHoveredIndex );\n      this._pointHoveredIndex = -1;\n      this._pointGrabbedIndex = -1;\n    }\n\n  }\n\n\n  /**\n  * [EVENT] [PRIVATE]\n  * for when the mouse is leaving the canvas\n  */\n  _onCanvasMouseLeave(evt){\n    this._mouse = null;\n    //console.log( \"leave\" );\n    this._canvas.blur();\n    this._canvas.style.border = this._borderStyle.out;\n\n    this._mouseDown = false;\n    this._pointGrabbedIndex = -1;\n    this._pointHoveredIndex = -1;\n\n    this.draw();\n  }\n\n\n  /**\n  * [EVENT] [PRIVATE]\n  * The mouse enters the canvas\n  */\n  _onCanvasMouseEnter(evt){\n    //console.log(\"enter\");\n    this._canvas.focus();\n    this._canvas.style.border = this._borderStyle.in;\n  }\n\n\n  /**\n  * [EVENT] [PRIVATE]\n  * A keyboard key is released\n  */\n  _onKeyUp(evt){\n    // mouse must be inside\n    if(! this._mouse)\n      return;\n\n    //console.log(\"pressed: \" + evt.key);\n\n    switch (evt.key) {\n      case \"d\":\n        this.remove( this._pointHoveredIndex );\n        break;\n      default:\n\n    }\n  }\n\n\n\n  /**\n  * Add a point to the collection\n  * @param {Object} pt - of type {x: Number, y: Number} and optionnally the boolean properties \"xLocked\" and \"yLocked\". x and y must be in [0, 1]\n  */\n  add( pt, draw = true ){\n    var index = null;\n\n    if(\"x\" in pt && \"y\" in pt){\n      pt.x *= this._width;\n      pt.y *= this._height;\n      index = this._pointCollection.add( pt );\n      //console.log(\"a point is added\");\n    }\n\n    if( draw ){\n      this.draw();\n    }\n    \n    if(this._onEvents.pointAdded)\n      this._onEvents.pointAdded( this );\n\n    return index;\n  }\n\n\n  /**\n  * Remove a point using its index\n  * @param {Number} index - index of the point to remove (from left to right, starting at 0)\n  */\n  remove( index ){\n    var removedPoint = this._pointCollection.remove( index );\n    this.draw();\n    \n    if(this._onEvents.pointRemoved)\n      this._onEvents.pointRemoved( this );\n  }\n\n\n  /**\n  * Draw the whole canvas\n  */\n  draw(){\n    this._ctx.clearRect(0, 0, this._width, this._height);\n    this._fillBackground();\n    this._drawGrid();\n    this._drawData();\n  }\n  \n  \n  /**\n  * [PRIVATE]\n  * Paint the background with a given color\n  */\n  _fillBackground(){\n    if(! this._backgroundColor)\n      return;\n    \n    this._ctx.beginPath();\n    this._ctx.rect(0, 0, this._width, this._height);\n    this._ctx.fillStyle = this._backgroundColor;\n    this._ctx.fill();\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Display xy coordinates on the upper left corner\n  */\n  _drawCoordinates(x, y){\n    var textSize = 14 / this._screenRatio;\n    this._ctx.fillStyle = this._textColor;\n    this._ctx.font = textSize + \"px courier\";\n    this._ctx.fillText(\"x: \" + x, 10/this._screenRatio, 20/this._screenRatio);\n    this._ctx.fillText(\"y: \" + y, 10/this._screenRatio, 35/this._screenRatio);\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Draw the background grid\n  */\n  _drawGrid(){\n    var step = this._gridStep;\n\n    if( step == 0)\n      return;\n\n    // horitontal grid\n    this._ctx.beginPath();\n    this._ctx.moveTo(0, 0);\n\n    for(var i=step*this._height/this._screenRatio; i<this._height/this._screenRatio; i += step*this._height/this._screenRatio){\n      this._ctx.moveTo(0, Math.round(i) + 0.5/this._screenRatio);\n      this._ctx.lineTo(this._width ,Math.round(i) + 0.5/this._screenRatio );\n    }\n\n    this._ctx.moveTo(0, 0);\n    for(var i=step*this._width/this._screenRatio; i<this._width/this._screenRatio; i += step*this._width/this._screenRatio){\n      this._ctx.moveTo(Math.round(i) + 0.5/this._screenRatio, 0);\n      this._ctx.lineTo(Math.round(i) + 0.5/this._screenRatio , this._height );\n    }\n\n    this._ctx.strokeStyle = this._gridColor;\n    this._ctx.lineWidth = 0.5;\n    this._ctx.stroke();\n    this._ctx.closePath()\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Draw the data on the canvas\n  * @param {Boolean} curve - whether or not we draw the curve\n  * @param {Boolean} control - whether or not we draw the control points\n  */\n  _drawData( curve = true, control = true){\n    var xSeries = this._pointCollection.getXseries();\n    var ySeries = this._pointCollection.getYseries();\n    var w = this._width;\n    var h = this._height;\n    \n    if(!xSeries.length)\n      return;\n\n    // drawing the curve\n    if( curve ){\n\n      //console.log(\"draw curve\");\n\n      this._ctx.beginPath();\n      this._ctx.moveTo(xSeries[0] / this._screenRatio, (h - ySeries[0]) / this._screenRatio);\n\n      var splineInterpolator = new this._splineConstructor(xSeries, ySeries);\n      this._xSeriesInterpolated.fill(0);\n      this._ySeriesInterpolated.fill(0);\n\n      // before the first point (if not at the left of the canvas)\n      for(var x=0; x<Math.ceil(xSeries[0]); x++){\n        var y = ySeries[0]\n\n        // copying the inteprolated values in a buffer\n        this._xSeriesInterpolated[x] = x / w;\n        this._ySeriesInterpolated[x] = y / h;\n\n        // adjusting y for visual purpose\n        y = y < 0 ? 0.5 : y > h ? h - 0.5 : y;\n        this._ctx.lineTo(x/this._screenRatio, (h - y)/this._screenRatio);\n      }\n\n      // between the first and the last point\n      for(var x=Math.ceil(xSeries[0]); x<Math.ceil(xSeries[ xSeries.length - 1]); x++){\n        var y = splineInterpolator.interpolate(x)\n\n        // copying the inteprolated values in a buffer\n        this._xSeriesInterpolated[x] = x / w;\n        this._ySeriesInterpolated[x] = y / h;\n\n        // adjusting y for visual purpose\n        y = y < 0 ? 0.5 : y > h ? h - 0.5 : y;\n        this._ctx.lineTo(x/this._screenRatio, (h - y)/this._screenRatio);\n      }\n\n      // after the last point (if not at the right of the canvas)\n      for(var x=Math.ceil(xSeries[xSeries.length - 1]); x<w; x++){\n        var y = ySeries[ySeries.length - 1]\n\n        // copying the inteprolated values in a buffer\n        this._xSeriesInterpolated[x] = x / w;\n        this._ySeriesInterpolated[x] = y / h;\n\n        // adjusting y for visual purpose\n        y = y < 0 ? 0.5 : y > h ? h - 0.5 : y;\n        this._ctx.lineTo(x/this._screenRatio, (h - y)/this._screenRatio);\n      }\n\n      this._ctx.strokeStyle = this._pointGrabbedIndex == -1 ?  this._curveColor.idle : this._curveColor.moving;\n      this._ctx.lineWidth = this._curveThickness / this._screenRatio;\n      this._ctx.stroke();\n      this._ctx.closePath()\n    }\n\n    // drawing the control points\n    if( control ){\n      // control points\n      for(var i=0; i<xSeries.length; i++){\n        this._ctx.beginPath();\n\n        this._ctx.arc(\n          xSeries[i]/this._screenRatio,\n          (h - ySeries[i]) / this._screenRatio,\n          this._controlPointRadius/this._screenRatio,\n          0,\n          2*Math.PI\n        );\n\n        // drawing a point that is neither hovered nor grabbed\n        if( this._pointHoveredIndex == -1 ){\n          this._ctx.fillStyle = this._controlPointColor.idle;\n        }else{\n          // drawing a point that is hovered or grabbed\n          if( i == this._pointHoveredIndex){\n\n            // the point is grabbed\n            if( this._mouseDown ){\n              this._ctx.fillStyle = this._controlPointColor.grabbed;\n            }\n            // the point is hovered\n            else{\n              this._ctx.fillStyle = this._controlPointColor.hovered;\n            }\n\n          }else{\n            this._ctx.fillStyle = this._controlPointColor.idle;\n          }\n        }\n\n        this._ctx.fill();\n        this._ctx.closePath()\n      }\n    }\n  }\n\n\n  /**\n  * Get a single interpolated value\n  * @param {Number} x - normalized x (in [0, 1])\n  * @return {number} the normalized interpolated value\n  */\n  getValue( x ){\n    var xSeries = this._pointCollection.getXseries();\n    var ySeries = this._pointCollection.getYseries();\n\n    // before the first x, we return the fist y\n    if( x<= (xSeries[0]/this._width) ){\n      return ySeries[0] / this._height;\n    }else\n    // after the last x, we return the last y\n    if(x>= (xSeries[xSeries.length-1]/this._width)){\n      return ySeries[ySeries.length-1] / this._height;\n    }\n    // somwhere in the the series, we interpolate\n    else{\n      var splineInterpolator = new this._splineConstructor(xSeries, ySeries);\n      return splineInterpolator.interpolate( x * this._width ) / this._height;\n    }\n\n  }\n\n\n  /**\n  * Define an event\n  * @param {String} eventName - name of the event. \"movePoint\", \"releasePoint\", \"pointAdded\" or \"pointRemoved\". They are both called with this in argument\n  */\n  on( eventName, callback ){\n    this._onEvents[ eventName ] = callback;\n  }\n\n\n} /* END of class CanvasSpliner */\n\nexport { CanvasSpliner };\n// Note: we chose not to export PointCollection\n"],"names":["splines","index"],"mappings":"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"}